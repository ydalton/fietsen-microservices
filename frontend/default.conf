# This is an nginx config file that serves a static HTML file, which is
# more than enough for React.

server {
	listen 80 default_server;
	listen [::]:80 default_server;

	root /var/www/localhost/htdocs;

	index index.html;

	# All routes are on the index page for React
	location / {
		try_files $uri /index.html;
	}

	# We don't have a favicon
	location /favicon.ico {
		return 404;
	}

	# Proxy pass to API
	location /api {
		# development
		add_header Access-Control-Allow-Origin '*' always;
		add_header Access-Control-Allow-Methods 'GET, PUT, POST, DELETE, HEAD' always;
		proxy_pass http://api-gateway:8083;
	}
}
